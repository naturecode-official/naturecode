# NatureCode Installation Architecture

## ğŸ—ï¸ å®‰è£…ç³»ç»Ÿæ¶æ„

### å±‚æ¬¡ç»“æ„

```
ç”¨æˆ·
  â†“
install.sh (ä¸»å…¥å£ç‚¹)
  â†“
install-smart.sh (æ™ºèƒ½å®‰è£…å™¨)
  â”œâ”€â”€ Simple Mode (ç®€å•æ¨¡å¼)
  â””â”€â”€ Professional Mode (ä¸“ä¸šæ¨¡å¼)
```

### æ–‡ä»¶è¯´æ˜

#### 1. **ä¸»å…¥å£ç‚¹** (`install.sh`)

- **å¤§å°**: 33è¡Œ
- **ä½œç”¨**: ä¸‹è½½å¹¶å¯åŠ¨æ™ºèƒ½å®‰è£…å™¨
- **ç”¨æˆ·å‘½ä»¤**: `curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install.sh | bash`
- **ç‰¹ç‚¹**: è½»é‡çº§ï¼Œåªè´Ÿè´£ä¸‹è½½

#### 2. **æ™ºèƒ½å®‰è£…å™¨** (`install-smart.sh`)

- **å¤§å°**: 434è¡Œ
- **ä½œç”¨**: è¯¢é—®ç”¨æˆ·å®‰è£…æ¨¡å¼ï¼Œç„¶åæ‰§è¡Œç›¸åº”å®‰è£…
- **ç‰¹ç‚¹**:
  - è¯¢é—®ç”¨æˆ·é€‰æ‹©å®‰è£…æ¨¡å¼
  - æ ¹æ®é€‰æ‹©è°ƒç”¨ä¸åŒå®‰è£…é€»è¾‘
  - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
  - å®Œæ•´çš„å®‰è£…åæŒ‡å¯¼

#### 3. **ç®€å•æ¨¡å¼** (é›†æˆåœ¨ `install-smart.sh` ä¸­)

- **ç›®æ ‡ç”¨æˆ·**: æ™®é€šç”¨æˆ·
- **ç‰¹ç‚¹**:
  - å¿«é€Ÿå®‰é™å®‰è£…
  - æœ€å°åŒ–è¾“å‡º
  - è‡ªåŠ¨å†³ç­–
  - æ¨èç»™å¤§å¤šæ•°ç”¨æˆ·

#### 4. **ä¸“ä¸šæ¨¡å¼** (é›†æˆåœ¨ `install-smart.sh` ä¸­)

- **ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…/é«˜çº§ç”¨æˆ·
- **ç‰¹ç‚¹**:
  - è¯¦ç»†å®‰è£…è¿‡ç¨‹
  - ç³»ç»Ÿä¿¡æ¯æ˜¾ç¤º
  - äº¤äº’å¼æç¤º
  - æ›´å¥½çš„é”™è¯¯è¯Šæ–­

#### 5. **ç›´æ¥å®‰è£…è„šæœ¬** (å¤‡ç”¨)

- `install-simple.sh`: ç›´æ¥ç®€å•å®‰è£…ï¼ˆç»•è¿‡æ¨¡å¼é€‰æ‹©ï¼‰
- `install-universal.sh`: é€šç”¨å®‰è£…å™¨ï¼ˆè¯¢é—® GitHub ç”¨æˆ·åï¼‰
- `install-curl.sh`: é«˜çº§äº¤äº’å¼å®‰è£…å™¨
- `install-local.sh`: æœ¬åœ°å®‰è£…è„šæœ¬

## ğŸ¯ ç”¨æˆ·æµç¨‹

### æ ‡å‡†æµç¨‹ (æ¨è)

```
ç”¨æˆ·è¿è¡Œ: curl .../install.sh | bash
        â†“
ä¸‹è½½ install.sh
        â†“
ä¸‹è½½ install-smart.sh
        â†“
è¯¢é—®: "Select installation mode:"
        â†“
ç”¨æˆ·é€‰æ‹©: [1] Simple æˆ– [2] Professional
        â†“
æ‰§è¡Œç›¸åº”å®‰è£…
        â†“
æ˜¾ç¤ºå®‰è£…åæŒ‡å¯¼
```

### ç®€å•æ¨¡å¼æµç¨‹

```
é€‰æ‹© Simple Mode
        â†“
æ˜¾ç¤ºæ¨ªå¹…
        â†“
æ£€æŸ¥è¦æ±‚
        â†“
é™é»˜å®‰è£…
        â†“
ç®€å•ç»“æœ
```

### ä¸“ä¸šæ¨¡å¼æµç¨‹

```
é€‰æ‹© Professional Mode
        â†“
æ˜¾ç¤ºæ¨ªå¹…
        â†“
æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
        â†“
è¯¦ç»†æ£€æŸ¥è¦æ±‚
        â†“
äº¤äº’å¼å®‰è£…
        â†“
è¯¦ç»†ç»“æœå’ŒæŒ‡å¯¼
```

##  æŠ€æœ¯å®ç°

### æ¨¡å¼æ£€æµ‹é€»è¾‘

```bash
# åœ¨ install-smart.sh ä¸­
ask_installation_mode() {
    echo "Select installation mode:"
    echo "1) Simple Mode"
    echo "2) Professional Mode"
    read -r choice

    case "${choice:-1}" in
        1) INSTALL_MODE="simple" ;;
        2) INSTALL_MODE="pro" ;;
        *) INSTALL_MODE="simple" ;;
    esac
}
```

### åŒé‡æ—¥å¿—ç³»ç»Ÿ

```bash
# ç®€å•æ¨¡å¼æ—¥å¿—å‡½æ•°
log_info_simple() { echo -e "${BLUE}[INFO]${NC} $1"; }

# ä¸“ä¸šæ¨¡å¼æ—¥å¿—å‡½æ•°
log_step() { echo -e "${MAGENTA}[STEP]${NC} $1"; }
log_info() { echo -e "${CYAN}[INFO]${NC} $1"; }
```

### æ¡ä»¶æ‰§è¡Œ

```bash
# æ ¹æ®æ¨¡å¼æ‰§è¡Œä¸åŒé€»è¾‘
if [ "$INSTALL_MODE" = "simple" ]; then
    install_simple
else
    install_pro
fi
```

## ğŸ“Š æ¨¡å¼å¯¹æ¯”è¡¨

| ç‰¹æ€§             | Simple Mode | Professional Mode |
| ---------------- | ----------- | ----------------- |
| **è¾“å‡ºè¯¦ç»†ç¨‹åº¦** | æœ€å°        | è¯¦ç»†              |
| **ç”¨æˆ·äº¤äº’**     | æ—           | æœ‰                |
| **ç³»ç»Ÿä¿¡æ¯**     | ä¸æ˜¾ç¤º      | æ˜¾ç¤º              |
| **é”™è¯¯è¯Šæ–­**     | åŸºæœ¬        | è¯¦ç»†              |
| **å®‰è£…æ—¶é—´**     | è¾ƒå¿«        | ç¨æ…¢              |
| **ç›®æ ‡ç”¨æˆ·**     | æ™®é€šç”¨æˆ·    | å¼€å‘è€…/é«˜çº§ç”¨æˆ·   |
| **æ¨èåº¦**       | é«˜          | ä¸­                |

##  ä½¿ç”¨ç¤ºä¾‹

### æ ‡å‡†å®‰è£… (æ¨è)

```bash
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install.sh | bash
```

### ç›´æ¥ç®€å•å®‰è£… (ç»•è¿‡æ¨¡å¼é€‰æ‹©)

```bash
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install-simple.sh | bash
```

### ç›´æ¥ä¸“ä¸šå®‰è£… (ä½¿ç”¨é€šç”¨å®‰è£…å™¨)

```bash
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install-universal.sh | bash
```

## ğŸ¨ ç”¨æˆ·ä½“éªŒ

### ç®€å•æ¨¡å¼ç•Œé¢

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   NatureCode Smart Installer                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[INFO] Checking requirements...
[SUCCESS] Requirements OK
[INFO] Installing...
[SUCCESS] Successfully installed
```

### ä¸“ä¸šæ¨¡å¼ç•Œé¢

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   NatureCode Smart Installer                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[STEP] System Information
  OS: Darwin
  Node.js: v18.15.0

[STEP] Checking prerequisites
[INFO] Checking Node.js...
[SUCCESS] All prerequisites satisfied

[STEP] Installation Details
  Target version: v1.4.5.4
  Current version: not_installed

[STEP] Downloading NatureCode...
[INFO] Downloading from GitHub...
[SUCCESS] Dependencies installed
```

## ğŸ”„ æ›´æ–°ç­–ç•¥

### ç‰ˆæœ¬æ›´æ–°

```bash
# æ‰€æœ‰å®‰è£…è„šæœ¬éƒ½ä¼š:
1. æ£€æµ‹å·²å®‰è£…ç‰ˆæœ¬
2. å¦‚æœç‰ˆæœ¬ä¸åŒï¼Œè‡ªåŠ¨æ›´æ–°
3. ä¿ç•™ç”¨æˆ·é…ç½®
```

### è„šæœ¬æ›´æ–°

- `install.sh`: å¾ˆå°‘æ›´æ–°ï¼Œåªè´Ÿè´£ä¸‹è½½
- `install-smart.sh`: åŒ…å«ä¸»è¦é€»è¾‘ï¼Œå¯ç‹¬ç«‹æ›´æ–°
- å…¶ä»–è„šæœ¬: ä½œä¸ºå¤‡ç”¨é€‰é¡¹

## ğŸ“ æ–‡ä»¶æ¸…å•

### å¿…éœ€æ–‡ä»¶ (ä¸Šä¼ åˆ° GitHub)

```
install.sh              # ä¸»å…¥å£ç‚¹ (33è¡Œ)
install-smart.sh        # æ™ºèƒ½å®‰è£…å™¨ (434è¡Œ)
```

### å¤‡ç”¨æ–‡ä»¶ (å¯é€‰ä¸Šä¼ )

```
install-simple.sh       # ç›´æ¥ç®€å•å®‰è£…
install-universal.sh    # é€šç”¨å®‰è£…å™¨
install-curl.sh         # é«˜çº§å®‰è£…å™¨
install-local.sh        # æœ¬åœ°å®‰è£…
```

### æ–‡æ¡£æ–‡ä»¶

```
INSTALLATION_ARCHITECTURE.md  # æœ¬æ–‡æ¡£
README_INSTALL.md            # ç”¨æˆ·æŒ‡å—
CURL_INSTALL.md             # è¯¦ç»†å®‰è£…æŒ‡å—
```

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. ç”¨æˆ·å‹å¥½

- ç¬¬ä¸€å¥å°±é—®ç”¨æˆ·åå¥½
- æ¸…æ™°çš„æ¨¡å¼æè¿°
- é»˜è®¤é€‰æ‹©ç®€å•æ¨¡å¼

### 2. æ¨¡å—åŒ–

- ä¸»å…¥å£ç‚¹è½»é‡çº§
- æ™ºèƒ½å®‰è£…å™¨åŠŸèƒ½å®Œæ•´
- æ¨¡å¼é€»è¾‘åˆ†ç¦»

### 3. å‘åå…¼å®¹

- ä¿ç•™æ‰€æœ‰ç°æœ‰è„šæœ¬
- ç”¨æˆ·ä¹ æƒ¯ä¸å—å½±å“
- æ–°å¢åŠŸèƒ½å¯é€‰

### 4. æ˜“äºç»´æŠ¤

- ç»Ÿä¸€é”™è¯¯å¤„ç†
- æ¸…æ™°çš„ä»£ç ç»“æ„
- è¯¦ç»†çš„æ–‡æ¡£

## ğŸ” æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹

1. **ç®€å•æ¨¡å¼**: `echo "1" | ./install-smart.sh`
2. **ä¸“ä¸šæ¨¡å¼**: `echo "2" | ./install-smart.sh`
3. **æ— æ•ˆè¾“å…¥**: `echo "3" | ./install-smart.sh` (åº”é»˜è®¤ç®€å•æ¨¡å¼)
4. **ç©ºè¾“å…¥**: `echo "" | ./install-smart.sh` (åº”é»˜è®¤ç®€å•æ¨¡å¼)

### éªŒè¯æ­¥éª¤

```bash
# 1. è¯­æ³•æ£€æŸ¥
bash -n install-smart.sh

# 2. åŠŸèƒ½æµ‹è¯•
./test-smart-installer.sh

# 3. å®é™…å®‰è£…æµ‹è¯•
./install-smart.sh
```

## ğŸ“ˆ ä¼˜åŠ¿æ€»ç»“

### å¯¹ç”¨æˆ·

-  **é€‰æ‹©æƒ**: ç”¨æˆ·å¯ä»¥é€‰æ‹©å®‰è£…ä½“éªŒ
-  **ç®€å•æ€§**: æ™®é€šç”¨æˆ·å¾—åˆ°æœ€ç®€å•ä½“éªŒ
-  **é€æ˜æ€§**: é«˜çº§ç”¨æˆ·çœ‹åˆ°è¯¦ç»†è¿‡ç¨‹
-  **ä¸€è‡´æ€§**: ç»Ÿä¸€çš„å®‰è£…åæŒ‡å¯¼

### å¯¹å¼€å‘è€…

-  **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„æ¶æ„
-  **å¯æ‰©å±•æ€§**: å®¹æ˜“æ·»åŠ æ–°åŠŸèƒ½
-  **å¯æµ‹è¯•æ€§**: æ¨¡å—åŒ–è®¾è®¡ä¾¿äºæµ‹è¯•
-  **æ–‡æ¡£å®Œæ•´**: è¯¦ç»†çš„æ¶æ„è¯´æ˜

##  æœ€ç»ˆæ¨è

### å¯¹äºå¤§å¤šæ•°ç”¨æˆ·

```bash
# ä½¿ç”¨ä¸»å®‰è£…å™¨ï¼Œé€‰æ‹©ç®€å•æ¨¡å¼
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install.sh | bash
```

### å¯¹äºå¼€å‘è€…

```bash
# ä½¿ç”¨ä¸»å®‰è£…å™¨ï¼Œé€‰æ‹©ä¸“ä¸šæ¨¡å¼
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install.sh | bash
# æˆ–ç›´æ¥ä½¿ç”¨é€šç”¨å®‰è£…å™¨
curl -fsSL https://raw.githubusercontent.com/naturecode-official/naturecode/main/install-universal.sh | bash
```

è¿™ä¸ªæ¶æ„æä¾›äº†æœ€ä½³çš„å¹³è¡¡ï¼šç®€å•ç”¨æˆ·å¾—åˆ°ç®€å•ä½“éªŒï¼Œé«˜çº§ç”¨æˆ·å¾—åˆ°è¯¦ç»†æ§åˆ¶ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½ä»ç»Ÿä¸€çš„å®‰è£…ç³»ç»Ÿä¸­å—ç›Šã€‚
